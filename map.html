<!doctype html>
{{-- <html lang="{{ app()->getLocale() }}"> --}}

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
        <title>Map</title>

        <!-- Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Raleway:100,600" rel="stylesheet" type="text/css">

        <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />

    </head>


<style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
    <body>

        

        <div id='map'></div>
    </body>
</html>

<script>

L.mapbox.accessToken = 'pk.eyJ1IjoiYWNyaWNhYSIsImEiOiJjamRhb2Y3dmo0MHoyMzNxZnluc21mM3ZiIn0.x9DNctWU9spRhHoz_7I4AA';
var map = L.mapbox.map('map', 'mapbox.streets')
    .setView([39.938507, -75.180097], 15);

var featureLayer = L.mapbox.featureLayer()
    .loadURL('https://www.rideindego.com/stations/json/')
    .addTo(map);



    // Generate a GeoJSON line. You could also load GeoJSON via AJAX
// or generate it some other way.


var line_points = [
[39.938507, -75.180097],
[39.932590, -75.181316],
[39.932200, -75.181690],
[39.932791, -75.186450],
[39.939118, -75.185090],
[39.938484, -75.180035]
];

// var geojson = { type: 'LineString', coordinates: [] };

//     geojson.coordinates.push(start.slice());
// }


var geojson = { type: 'LineString', coordinates: [
 [
            -75.18008708953857,
            39.938517394618415
          ],
          [
            -75.18013000488281,
            39.93817189499188
          ],
          [
            -75.18023729324341,
            39.93767832107088
          ],
          [
            -75.18030166625975,
            39.93734926981249
          ],
          [
            -75.180344581604,
            39.93708602766659
          ],
          [
            -75.18040895462036,
            39.936756973560286
          ],
          [
            -75.18049478530884,
            39.93634565370247
          ],
          [
            -75.18064498901367,
            39.93575334876414
          ],
          [
            -75.1807951927185,
            39.935243304292904
          ],
          [
            -75.18083810806274,
            39.934947147694324
          ],
          [
            -75.1809024810791,
            39.934502910393526
          ],
          [
            -75.18098831176758,
            39.93409157698847
          ],
          [
            -75.18107414245605,
            39.93384477575881
          ],
          [
            -75.18113851547241,
            39.933565066622684
          ],
          [
            -75.18122434616089,
            39.93333471706403
          ],
          [
            -75.18124580383301,
            39.93313727396817
          ],
          [
            -75.18126726150511,
            39.932874015621
          ],
          [
            -75.1813530921936,
            39.93261075626125
          ],
          [
            -75.18150329589844,
            39.93242976486409
          ],
          [
            -75.18165349960327,
            39.932265226814984
          ],
          [
            -75.18186807632446,
            39.93223231915768
          ],
          [
            -75.18221139907837,
            39.932265226814984
          ],
          [
            -75.1830267906189,
            39.93236394969191
          ],
          [
            -75.18334865570068,
            39.932396857285916
          ],
          [
            -75.18375635147095,
            39.93246267242643
          ],
          [
            -75.18418550491333,
            39.93251203374031
          ],
          [
            -75.18472194671631,
            39.93256139501859
          ],
          [
            -75.18517255783081,
            39.93266011746834
          ],
          [
            -75.18577337265015,
            39.93269302491995
          ],
          [
            -75.18637418746948,
            39.93277529347977
          ],
          [
            -75.18630981445312,
            39.93328535634347
          ],
          [
            -75.18613815307617,
            39.93397640319203
          ],
          [
            -75.18600940704346,
            39.934535816959134
          ],
          [
            -75.18598794937134,
            39.93481552212804
          ],
          [
            -75.1859450340271,
            39.935226851182165
          ],
          [
            -75.1858377456665,
            39.93539138211164
          ],
          [
            -75.18579483032227,
            39.93578625472855
          ],
          [
            -75.18570899963379,
            39.93600014311142
          ],
          [
            -75.18570899963379,
            39.936296295153404
          ],
          [
            -75.18562316894531,
            39.93652663474448
          ],
          [
            -75.18558025360107,
            39.93688859539268
          ],
          [
            -75.18547296524048,
            39.93718474358997
          ],
          [
            -75.18545150756836,
            39.93751379563947
          ],
          [
            -75.18536567687988,
            39.93780994113124
          ],
          [
            -75.1852798461914,
            39.9380402756277
          ],
          [
            -75.18517255783081,
            39.938517394618415
          ],
          [
            -75.18517255783081,
            39.9387806312583
          ],
          [
            -75.18508672714233,
            39.939109675634185
          ],
          [
            -75.18485069274902,
            39.93909322345296
          ],
          [
            -75.18450736999512,
            39.93906031907867
          ],
          [
            -75.18414258956909,
            39.93902741468856
          ],
          [
            -75.18375635147095,
            39.93896160586083
          ],
          [
            -75.1833701133728,
            39.93891224919853
          ],
          [
            -75.18313407897949,
            39.93886289250063
          ],
          [
            -75.1828122138977,
            39.938829988015556
          ],
          [
            -75.18249034881592,
            39.938797083514686
          ],
          [
            -75.18223285675049,
            39.9387806312583
          ],
          [
            -75.18176078796387,
            39.938681917637005
          ],
          [
            -75.18143892288208,
            39.938665465352955
          ],
          [
            -75.1810097694397,
            39.93861610847705
          ],
          [
            -75.18064498901367,
            39.938566751565546
          ],
          [
            -75.18036603927612,
            39.938550299253784
          ],
          [
            -75.18021583557129,
            39.938533846938086
          ]
] };

// Add this generated geojson object to the map.
L.geoJson(geojson).addTo(map);

// Create a counter with a value of 0.
var j = 0;

// Create a marker and add it to the map.
var marker = L.marker([0, 0], {
  icon: L.mapbox.marker.icon({
    'marker-color': '#f86767'
  })
}).addTo(map);

tick();
function tick() {
    // Set the marker to be at the same point as one
    // of the segments or the line.
    marker.setLatLng(L.latLng(
        geojson.coordinates[j][1],
        geojson.coordinates[j][0]));

    // Move to the next point of the line
    // until `j` reaches the length of the array.
    if (++j < geojson.coordinates.length) setTimeout(tick, 500);
}
</script>